# Wallet API

Этот проект представляет собой RESTful API для кошельков, которое позволяет пользователям выполнять операции по пополнению и снятию средств с кошельков, а также получать баланс кошельков. Приложение построено на Java 17, Spring 3 и mySQL и рассчитано на работу с высокой нагрузкой. Для миграции базы данных используется Liquibase, и приложение полностью контейнеризировано с использованием Docker и Docker Compose.

### Функциональные требования
- **POST /api/v1/wallet**
  - **Тело запроса:**
    ```json
    {
      "walletId": "UUID",
      "operationType": "DEPOSIT or WITHDRAW",
      "amount": 1000
    }
    ```
  - **Описание:** Обрабатывает операцию пополнения или снятия средств на указанном кошельке.

- **GET /api/v1/wallets/{WALLET_UUID}**
  - **Описание:** Получает баланс указанного кошелька.
- **GET /api/v1/wallets**
  - **Описание:** Метод для демонстративного добавления кошелька со случайным баллансом.

### Нефункциональные требования
- Обработка высокой нагрузки (1000 RPS) для одного кошелька без ошибок 50x.
- Валидация и обработка некорректных запросов:
  - Не существующий кошелек.
  - Неверный JSON.
  - Недостаточно средств.

## Подробности реализации

### Технологический стек
- **Java:** 17
- **Spring:** 3
- **База данных:** MySQL
- **Миграции базы данных:** Liquibase
- **Контейнеризация:** Docker, Docker Compose

### Ключевые особенности
- **Обработка конкуренции:** Оптимизировано для обработки 1000 RPS на одном кошельке.
- **Обработка ошибок:** Полная обработка ошибок для некорректных запросов и недостатка средств.
- **Тесты:** Эндпоинты покрыты тестами для обеспечения надежности.

### Миграции базы данных
Для управления изменениями схемы базы данных используется Liquibase. Миграции определены в `src/main/resources/db/changelog`.

### Настройка Docker
Приложение и база данных mySQL контейнеризированы с использованием Docker. Система может быть запущена с помощью Docker Compose.

- **Dockerfile:** Определяет контейнер приложения.
- **docker-compose.yml:** Определяет настройку мультиконтейнерной системы.

### Как запустить
1. **Клонируйте репозиторий:**
   ```sh
   git clone https://github.com/Efreh/wallet-api.git
   cd wallet-api
2. **Соберите и запустите приложение:**
   ```sh
   docker-compose up --build
3. **Доступ к API:**
   - **POST:** http://localhost:8585/api/v1/wallet
   - **GET:** http://localhost:8585/api/v1/wallets/{WALLET_UUID}
   - **GET:** http://localhost:8585/api/v1/wallets
